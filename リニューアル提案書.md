# 🍽️ つくばみらい市給食献立アプリ リニューアル提案書

## 📋 プロジェクト概要

Glideで作成した給食献立アプリを、広告収益化とメンテナンス性を向上させたWebアプリ（PWA対応）にリニューアルする提案です。

---

## 🎯 推奨技術スタック

### **提案1: Next.js + TypeScript（推奨）**

**理由:**
- ✅ SEO最適化が容易（広告収益に重要）
- ✅ PWA対応でモバイルアプリのような体験
- ✅ 広告統合が簡単（Google AdSense、アフィリエイト）
- ✅ 開発・デプロイが容易（Vercelで無料ホスティング可能）
- ✅ CSV読み込み機能の実装が簡単

**技術構成:**
- **フロントエンド**: Next.js 14 (App Router) + TypeScript + Tailwind CSS
- **データ管理**: CSVファイル → JSON変換 → 静的生成またはAPI経由
- **広告**: Google AdSense + アフィリエイトリンク（Amazon、楽天など）
- **デプロイ**: Vercel（無料プランで十分）
- **PWA**: next-pwa パッケージで実装

---

### **提案2: React Native + Expo（モバイルアプリ）**

**理由:**
- ✅ ネイティブアプリとして配信可能（App Store、Google Play）
- ✅ プッシュ通知機能
- ✅ オフライン対応が容易

**技術構成:**
- **フレームワーク**: React Native + Expo
- **データ管理**: CSV → Firebase/Cloud Firestore
- **広告**: Google AdMob
- **デプロイ**: Expo Application Services (EAS)

---

## 💡 推奨: 提案1（Next.js Webアプリ）

**理由:**
1. **広告収益化が容易**: Google AdSenseの統合が簡単
2. **メンテナンス性**: CSVアップロード機能を簡単に実装可能
3. **コスト**: 無料でホスティング可能（Vercel）
4. **開発速度**: 既存のWeb技術で迅速に開発可能
5. **PWA対応**: ホーム画面に追加でき、アプリのような体験を提供

---

## 🏗️ アーキテクチャ設計

### データフロー

```
CSVファイル（管理者アップロード）
    ↓
バックエンドAPI（CSV解析・検証）
    ↓
データベース（SQLite/PostgreSQL）またはJSONファイル
    ↓
Next.js API Routes（データ取得）
    ↓
フロントエンド（献立表示 + 広告表示）
```

### ディレクトリ構造（Next.js版）

```
tsukubamirai-kyushoku-app/
├── app/
│   ├── (public)/
│   │   ├── page.tsx          # トップページ（献立一覧）
│   │   ├── [date]/
│   │   │   └── page.tsx      # 日付別献立詳細
│   │   └── layout.tsx
│   ├── admin/
│   │   ├── page.tsx          # 管理者ダッシュボード
│   │   └── upload/
│   │       └── page.tsx     # CSVアップロード
│   ├── api/
│   │   ├── kondate/
│   │   │   └── route.ts      # 献立データ取得API
│   │   └── upload/
│   │       └── route.ts      # CSVアップロードAPI
│   └── layout.tsx
├── components/
│   ├── AdBanner.tsx          # 広告バナーコンポーネント
│   ├── AffiliateLink.tsx    # アフィリエイトリンク
│   ├── KondateCard.tsx      # 献立カード
│   └── CSVUploader.tsx      # CSVアップロードコンポーネント
├── lib/
│   ├── csvParser.ts         # CSV解析ロジック
│   ├── adsense.ts           # AdSense設定
│   └── db.ts                # データベース操作
├── data/
│   └── kondate.json         # 献立データ（JSON形式）
└── public/
    └── manifest.json        # PWA設定
```

---

## 📊 主要機能

### 1. ユーザー向け機能

#### 献立閲覧機能
- ✅ カレンダー表示（月次・週次）
- ✅ 日付別献立詳細表示
- ✅ 検索機能（メニュー名、食材で検索）
- ✅ お気に入り機能（特定の献立を保存）
- ✅ 献立のシェア機能（SNS連携）

#### 広告・アフィリエイト
- ✅ Google AdSense統合（バナー広告、イン記事広告）
- ✅ アフィリエイトリンク（Amazon、楽天市場など）
  - 例: 給食で使われそうな食材・調味料のアフィリエイト
- ✅ 広告の適切な配置（UXを損なわない）

### 2. 管理者向け機能

#### CSVアップロード機能
- ✅ CSVファイルのドラッグ&ドロップアップロード
- ✅ CSV形式の検証・エラーチェック
- ✅ アップロード前のプレビュー
- ✅ 重複データの自動検出・スキップ
- ✅ アップロード履歴の記録

#### CSV形式仕様

```csv
日付,曜日,献立,備考
2024-01-15,月曜日,ごはん,味噌汁,鮭の塩焼き,ほうれん草のお浸し,牛乳,
2024-01-16,火曜日,パン,スープ,ハンバーグ,サラダ,牛乳,
```

または

```csv
date,weekday,menu,notes
2024-01-15,月,ごはん,味噌汁,鮭の塩焼き,ほうれん草のお浸し,牛乳,
2024-01-16,火,パン,スープ,ハンバーグ,サラダ,牛乳,
```

### 3. 広告収益化機能

#### Google AdSense
- 自動広告（記事内広告）
- ディスプレイ広告（サイドバー、フッター）
- イン記事広告（献立詳細ページ内）

#### アフィリエイトリンク
- **Amazonアソシエイト**: 給食関連商品（ランチボックス、水筒など）
- **楽天アフィリエイト**: 食材・調味料
- **Yahoo!アフィリエイト**: 関連商品

**実装例:**
```tsx
// 献立詳細ページに「この献立に使える食材」セクションを追加
// 各食材にアフィリエイトリンクを設置
```

---

## 🎨 UI/UXデザイン

### デザインコンセプト
- **シンプルで見やすい**: 保護者・子どもが使いやすい
- **モバイルファースト**: スマホでの閲覧を最優先
- **広告の適切な配置**: UXを損なわず、収益を最大化

### カラースキーム
- メインカラー: 温かみのあるオレンジ系（給食をイメージ）
- アクセントカラー: 緑系（野菜・健康をイメージ）

---

## 📱 PWA機能

### 実装機能
- ✅ ホーム画面への追加（iOS/Android）
- ✅ オフライン対応（キャッシュ機能）
- ✅ プッシュ通知（新着献立のお知らせ）
- ✅ アプリのような画面遷移

---

## 🔒 セキュリティ・認証

### 管理者認証
- **NextAuth.js**を使用した認証
- または、シンプルなパスワード保護（環境変数）

### データ保護
- CSVアップロード時のサニタイズ
- SQLインジェクション対策
- XSS対策

---

## 📈 収益化戦略

### 広告収益の見込み
1. **Google AdSense**: 月間PV数 × CPM（千回表示単価）
   - 例: 月間10,000PV × 500円/1000PV = 5,000円/月

2. **アフィリエイト**: クリック数 × コンバージョン率 × 報酬率
   - 例: 月間100クリック × 3% × 500円 = 1,500円/月

### 収益最大化のポイント
- ユーザーエンゲージメントの向上（滞在時間の延長）
- SEO最適化（検索流入の増加）
- SNSシェア機能（拡散によるPV増加）

---

## 🚀 開発スケジュール（目安）

### Phase 1: 基盤構築（1-2週間）
- Next.jsプロジェクトセットアップ
- データベース設計・実装
- CSVアップロード機能の実装

### Phase 2: フロントエンド開発（1-2週間）
- 献立表示画面の実装
- カレンダー機能
- 検索機能

### Phase 3: 広告統合（1週間）
- Google AdSense統合
- アフィリエイトリンク実装

### Phase 4: PWA対応・最適化（1週間）
- PWA機能実装
- パフォーマンス最適化
- SEO最適化

### Phase 5: テスト・デプロイ（1週間）
- テスト
- 本番環境へのデプロイ

**合計: 約5-7週間**

---

## 💰 コスト見積もり

### 開発コスト
- **自社開発**: 0円（既存の技術スタックで実装可能）
- **外注**: 50-100万円（機能の複雑さによる）

### 運用コスト
- **Vercel**: 無料プラン（月間100GB転送まで）
- **データベース**: 
  - SQLite（無料、小規模向け）
  - PostgreSQL（Supabase無料プラン、中規模向け）
- **ドメイン**: 約1,000円/年
- **Google AdSense**: 無料（審査必要）

**月額運用コスト: ほぼ0円〜数千円**

---

## 📝 次のステップ

### 1. 技術スタックの決定
- [ ] Next.js（Webアプリ）を選択
- [ ] または React Native（モバイルアプリ）を選択

### 2. プロジェクト開始
- [ ] プロジェクトの初期セットアップ
- [ ] データベース設計
- [ ] CSV形式の仕様確定

### 3. 開発開始
- [ ] 管理者機能の実装
- [ ] ユーザー向け機能の実装
- [ ] 広告統合

---

## 🎯 まとめ

**推奨アプローチ: Next.js + TypeScript（PWA対応）**

このアプローチにより：
- ✅ CSVメンテナンス機能を簡単に実装
- ✅ Google AdSense + アフィリエイトで収益化
- ✅ Webアプリとして配信（モバイルでも快適）
- ✅ 低コストで運用可能

既存のGlideアプリのデータを移行し、より柔軟で収益化しやすいアプリにリニューアルできます。

---

## 📞 ご質問・ご要望

この提案について、ご質問やご要望がございましたらお知らせください。
具体的な実装に進む準備ができましたら、お声がけください。

