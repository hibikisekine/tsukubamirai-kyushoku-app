# 🚀 セットアップガイド

## 1. 依存関係のインストール

```bash
cd 給食サイト
npm install
```

## 2. 環境変数の設定

`.env.local`ファイルを作成し、`.env.local.example`を参考に設定：

```bash
cp .env.local.example .env.local
```

`.env.local`を編集：
- `ADMIN_PASSWORD`: CSVアップロード用のパスワードを設定
- `NEXT_PUBLIC_ADSENSE_CLIENT_ID`: Google AdSenseのクライアントID（オプション）

## 3. 開発サーバーの起動

```bash
npm run dev
```

ブラウザで [http://localhost:3000](http://localhost:3000) を開く

## 4. 初回データのアップロード

1. ブラウザで `/admin/upload` にアクセス
2. サンプルCSVファイル（`data/sample.csv`）をアップロード
3. 管理者パスワードを入力してアップロード

## 5. Google AdSenseの設定（オプション）

### AdSenseアカウントの作成

1. [Google AdSense](https://www.google.com/adsense/)にアクセス
2. アカウントを作成・サイトを登録
3. 審査通過後、広告ユニットを作成
4. 広告ユニットIDを取得

### アプリへの統合

1. `.env.local`に`NEXT_PUBLIC_ADSENSE_CLIENT_ID`を設定
2. `components/AdBanner.tsx`の`data-ad-slot`を実際の広告ユニットIDに変更

```tsx
// components/AdBanner.tsx
data-ad-slot="1234567890" // ← 実際の広告ユニットIDに置き換え
```

## 6. PWAアイコンの作成

PWAアイコンを`public/`ディレクトリに配置：

- `icon-192x192.png` (192x192px)
- `icon-512x512.png` (512x512px)

オンラインツールで作成可能：
- [PWA Asset Generator](https://github.com/onderceylan/pwa-asset-generator)

## 7. 本番環境へのデプロイ

### Vercel（推奨）

1. [Vercel](https://vercel.com)にアカウント作成
2. GitHubリポジトリを接続
3. 環境変数を設定：
   - `ADMIN_PASSWORD`
   - `NEXT_PUBLIC_ADSENSE_CLIENT_ID`（オプション）
4. デプロイ

### 手動ビルド

```bash
npm run build
npm start
```

## 📝 CSV形式

CSVファイルは以下の形式で作成：

```csv
日付,曜日,献立
2024-01-15,月曜日,ごはん,味噌汁,鮭の塩焼き,ほうれん草のお浸し,牛乳
2024-01-16,火曜日,パン,スープ,ハンバーグ,サラダ,牛乳
```

**注意事項:**
- ヘッダー行（日付,曜日,献立）は必須
- 日付は`YYYY-MM-DD`形式または`YYYY/MM/DD`形式
- 献立はカンマ区切りで複数のメニューを記載可能

## 🔒 セキュリティ

- 本番環境では`ADMIN_PASSWORD`を強力なパスワードに変更
- より高度な認証が必要な場合は、NextAuth.jsなどの認証ライブラリを使用

## 📱 PWA機能のテスト

1. 開発サーバーを起動
2. ブラウザの開発者ツールで「Application」タブを開く
3. 「Service Workers」で登録を確認
4. モバイルデバイスでアクセスし、ホーム画面に追加をテスト

## 🐛 トラブルシューティング

### CSVアップロードが失敗する

- CSVファイルの文字コードがUTF-8であることを確認
- ヘッダー行が正しいか確認（日付,曜日,献立）
- ブラウザのコンソールでエラーメッセージを確認

### 広告が表示されない

- AdSenseアカウントの審査が通過しているか確認
- 広告ユニットIDが正しく設定されているか確認
- 開発環境では広告が表示されない場合があります（本番環境で確認）

### PWAが動作しない

- `next.config.js`でPWAが有効になっているか確認
- `manifest.json`が正しく配置されているか確認
- HTTPSでアクセスしているか確認（本番環境）

