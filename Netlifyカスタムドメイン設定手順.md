# 🌐 Netlifyカスタムドメイン設定手順（kyushoku.site）

## 前提条件

- `kyushoku.site` ドメインを所有している
- 現在他のサイトで使用している（移行が必要）

## ステップ1: Netlifyでドメインを追加

1. **Netlifyダッシュボードにログイン**
   - https://app.netlify.com にアクセス

2. **プロジェクトを選択**
   - `meek-manatee-a78963` をクリック

3. **「Site settings」を開く**
   - 左サイドバーの「Site settings」（歯車アイコン⚙️）をクリック

4. **「Domain management」を選択**
   - 左サイドバーまたはメインエリアから選択

5. **「Add custom domain」をクリック**

6. **ドメインを入力**
   - `kyushoku.site` を入力
   - 「Verify」をクリック

## ステップ2: DNS設定（ドメイン管理画面で）

NetlifyがDNS設定の指示を表示します。ドメインのDNS管理画面で以下を設定：

### オプションA: ネームサーバーを変更（推奨）

Netlifyのネームサーバーを使用する場合：

1. **Netlifyで表示されるネームサーバーをコピー**
   - 例: `dns1.p01.nsone.net`, `dns2.p01.nsone.net` など

2. **ドメイン管理画面でネームサーバーを変更**
   - ドメイン登録業者（例: お名前.com、ムームードメインなど）の管理画面にログイン
   - 「ネームサーバー設定」または「DNS設定」を開く
   - Netlifyのネームサーバーに変更
   - 保存

### オプションB: DNSレコードを追加（既存のネームサーバーを使用）

既存のネームサーバーを維持する場合：

1. **Netlifyで表示されるDNSレコードを確認**
   - 通常は以下のいずれか：
     - **Aレコード**: `192.0.2.1` のようなIPアドレス
     - **CNAMEレコード**: `meek-manatee-a78963.netlify.app`

2. **ドメイン管理画面でDNSレコードを追加/変更**
   - ドメイン管理画面の「DNS設定」または「レコード設定」を開く
   - 既存の `kyushoku.site` のレコードを削除または変更
   - Netlifyの指示に従って新しいレコードを追加：
     - **タイプ**: `A` または `CNAME`
     - **ホスト**: `@` または空白（ルートドメインの場合）
     - **値**: Netlifyが表示するIPアドレスまたはCNAME
     - **TTL**: `3600` またはデフォルト値

## ステップ3: SSL証明書の設定

1. **NetlifyでSSL証明書を有効化**
   - 「Domain management」画面で
   - 「HTTPS」セクションを確認
   - 「Verify DNS configuration」をクリック
   - DNS設定が正しければ、自動的にSSL証明書が発行されます（数分〜数時間）

2. **「Force HTTPS」を有効化（推奨）**
   - 「HTTPS」セクションで
   - 「Force HTTPS」をオンにする
   - HTTPアクセスを自動的にHTTPSにリダイレクト

## ステップ4: 確認

1. **DNS伝播を待つ**
   - DNS設定の変更は反映まで数分〜48時間かかることがあります
   - 通常は数時間以内に反映されます

2. **ドメインにアクセス**
   - https://kyushoku.site にアクセス
   - サイトが表示されれば成功

3. **DNS伝播状況の確認**
   - https://dnschecker.org で `kyushoku.site` を検索
   - 世界中のDNSサーバーでの反映状況を確認

## ステップ5: 既存サイトからの移行

既存のサイトで `kyushoku.site` を使用している場合：

1. **既存サイトのバックアップ**
   - 既存サイトのデータをバックアップ

2. **DNS設定を変更**
   - 上記のステップ2に従ってDNS設定を変更

3. **ダウンタイムを最小化**
   - DNS設定を変更する前に、新しいサイトが正常に動作していることを確認
   - DNS設定を変更後、両方のドメインが一時的にアクセス可能になる場合があります

## トラブルシューティング

### DNS設定が反映されない

- DNS伝播を待つ（最大48時間）
- DNS設定が正しいか再確認
- ドメイン管理画面で設定を保存したか確認

### SSL証明書が発行されない

- DNS設定が正しく反映されているか確認
- 「Verify DNS configuration」を再実行
- 数時間待ってから再試行

### サイトが表示されない

- Netlifyの「Deploys」タブでデプロイが成功しているか確認
- ブラウザのキャッシュをクリア
- 別のブラウザやデバイスで確認

## 参考リンク

- [Netlify公式ドキュメント: カスタムドメイン](https://docs.netlify.com/domains-https/custom-domains/)
- [Netlify公式ドキュメント: DNS設定](https://docs.netlify.com/domains-https/dns-overview/)

