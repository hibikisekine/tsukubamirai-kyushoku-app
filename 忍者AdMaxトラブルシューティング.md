# 🔍 忍者AdMax トラブルシューティング

## 広告が表示されない場合の確認事項

### 1. 環境変数の確認

Netlifyで環境変数が正しく設定されているか確認：

- **Key**: `NEXT_PUBLIC_NINJA_ADMAX_SCRIPT_ID`
- **Value**: `73d1d6e1895b47d9212fc481b81c629d`（あなたのスクリプトID）

### 2. デプロイの確認

環境変数を設定した後、必ず再デプロイが必要です：

1. Netlifyの「Deploys」タブで「Trigger deploy」をクリック
2. 「Clear cache and deploy site」を選択
3. デプロイが完了するまで待つ（2-3分）

### 3. ブラウザの確認

- **広告ブロッカーを無効化**: 広告ブロッカーが有効な場合、広告が表示されません
- **JavaScriptが有効**: ブラウザの設定でJavaScriptが有効になっているか確認
- **キャッシュをクリア**: `Ctrl+Shift+Delete`（Windows）または `Cmd+Shift+Delete`（Mac）
- **ハードリロード**: `Ctrl+F5`（Windows）または `Cmd+Shift+R`（Mac）

### 4. 開発者ツールで確認

ブラウザの開発者ツール（F12）で確認：

1. **Consoleタブ**: エラーメッセージがないか確認
2. **Networkタブ**: `adm.shinobi.jp` へのリクエストが送信されているか確認
3. **Elementsタブ**: スクリプトタグが正しく読み込まれているか確認

### 5. 忍者AdMaxの審査状況

忍者AdMaxでは、広告タグを設置後、コンテンツの審査が行われます：

- **審査中**: 広告が表示されない場合があります（通常30分程度で配信開始）
- **管理画面で確認**: 忍者AdMaxの管理画面で「広告枠一覧」を確認
- **状態が「掲載不可」**: 審査に通っていない可能性があります

### 6. URLの確認

登録されているサイトのURLと、実際に広告を表示させたいページのURLが一致しているか確認：

- 忍者AdMaxの管理画面で登録したURL: `https://kyushoku.site`
- 実際のページURL: `https://kyushoku.site/2025-01-15`

### 7. スクリプトの読み込み確認

ブラウザの開発者ツールで、以下のスクリプトが読み込まれているか確認：

```html
<script src="https://adm.shinobi.jp/s/73d1d6e1895b47d9212fc481b81c629d"></script>
```

## 実装の確認

現在の実装では：

1. **コンポーネント側でスクリプトを読み込む**: `components/NinjaAdMax.tsx`
2. **クライアントサイドでのみ実行**: `useEffect`で読み込み
3. **重複読み込みを防止**: 既に読み込まれている場合はスキップ

## デバッグ方法

### コンソールで確認

ブラウザの開発者ツールのコンソールで以下を実行：

```javascript
// スクリプトが読み込まれているか確認
document.querySelector('script[src*="adm.shinobi.jp"]')

// 環境変数が正しく設定されているか確認（クライアント側では確認不可）
// サーバー側でのみ確認可能
```

### ネットワークタブで確認

1. 開発者ツールの「Network」タブを開く
2. ページを再読み込み
3. `adm.shinobi.jp` へのリクエストを確認
4. ステータスコードが200（成功）か確認

## よくある問題と解決方法

### 問題1: スクリプトが読み込まれない

**原因**: 環境変数が設定されていない、またはデプロイされていない

**解決方法**:
1. Netlifyで環境変数を確認
2. 再デプロイを実行
3. ブラウザのキャッシュをクリア

### 問題2: スクリプトは読み込まれるが広告が表示されない

**原因**: 審査中、または広告枠の設定が正しくない

**解決方法**:
1. 忍者AdMaxの管理画面で審査状況を確認
2. 広告枠の設定を確認
3. しばらく待つ（審査には時間がかかる場合があります）

### 問題3: 開発環境では表示されるが本番環境では表示されない

**原因**: 環境変数が本番環境に設定されていない

**解決方法**:
1. Netlifyで環境変数を確認
2. すべてのスコープ（Production, Deploy previews, Branch deploys）にチェックが入っているか確認

## 参考リンク

- [忍者AdMax公式ヘルプ](https://www.ninja.co.jp/admax/help/)
- [忍者AdMax FAQ](https://www.ninja.co.jp/admax/help/faq/)

## サポートへの問い合わせ

上記の確認を行っても問題が解決しない場合：

1. 忍者AdMaxのサポートに問い合わせ
2. 管理画面の「お問い合わせ」から連絡
3. 問題の詳細（エラーメッセージ、スクリーンショットなど）を添付

